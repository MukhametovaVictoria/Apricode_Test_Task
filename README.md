# Apricode_Test_Task

Задание:
Сделать web api для взаимодействия с базой данных, в которой хранятся данные о видеоиграх, реализовать CRUD операции с ней, 
а также метод для получения списка игр определённого жанра.
Информация о игре: название, студия разработчик, несколько жанров, которым соответствует игра.
Используя. NET core, entity framework.
Действуя согласно SOLID MVC MVVM.
Сделать минимум 3 слоя абстракций, а контроллеры "тонкими".

Решение:
Были созданы 4 модели БД:
1. Игры: название, разработчик.
2. Жанры: название.
3. Студии разработчики: название, список игр.
4. Промежуточная таблица Игра-Жанр: id игры, id жанра.

Промежуточная таблица нам нужна, т.к. между Играми и Жанрами существует связь Много-ко-многим.

Также была создана модель, которая отображает связку между игрой и ее жанрами. Можно создать подобное представление в самой БД, но я свела работу непосредственно в БД до минимума.
5.Модель Игра-Жанры: объект игры, список наименований жанров.

Контроллер игр выполнен с использованием репозитория: был создан интерфейс для работы с БД, реализован (модель 6), подключен в качестве сервиса, связан посредством агрегации с контроллером.
Такой подход, на сколько я поняла, реализует слабосвязность с БД.

Также было добавлено в модель реализации интерфейса 6 методов:
1. Метод создания словаря из промежуточной таблицы(модель 4). Можно бы было создать подобное представление в самой БД, но, как я говорила, я свела до минимума работу с ней.
2. Метод создания списка объектов (из модели 5).
3. Перегрузка метода из п.2 для создания списка по запросу определенных жанров.
4. Вспомогательный метод добавления данных в промежуточную таблицу. В нашем случае создается модель 5, где помимо игры передается список жанров. Этот список жанров также надо добавить в БД.
5. Вспомогательный метод редактирования промежуточной таблицы. В этом случае необходимо заново передавать полный список жанров редактируемой игры, т.к. старый список будет удален.
6. Вспомогательный метод удаления строк из промежуточной таблицы. Если игра удаляется, само собой первым делом необходимо удалить строки из промежуточной таблицы, иначе игра просто не удалится (внешний ключ не даст).

Остальные контроллеры выполнены в стандартном стиле, по учебнику, без репозитория, т.к. действия в них простые.
Следует отметить, что при передаче несуществующих в БД жанров, они не будут добавлены ни в Post, ни в Put запросах, и поиск по ним вестись не будет.

